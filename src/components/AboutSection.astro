---
import { Image } from 'astro:assets';

interface Props {
  subtitle?: string;
  title?: string;
  text: string;
  image: ImageMetadata;
  imageAlt?: string;
  reverse?: boolean;
}

const {
  subtitle,
  title = "Über uns",
  text,
  image,
  imageAlt = "Portrait",
  reverse = false,
} = Astro.props;

const textOrder = reverse ? 'order-2 md:order-1' : 'order-1';
const imageOrder = reverse ? 'order-1 md:order-2 justify-start' : 'justify-end';
---

<section id="mehr-uber-uns" class="w-full bg-cream-bg text-dark-brown font-sans">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 pb-[50px]">
    <!-- 📝 Título y subtítulo fuera del flex -->
    {subtitle && (
      <p class="uppercase section-label text-[var(--color-black)] mb-4">
        {subtitle}
      </p>
    )}
    {title && (
      <h2 class="heading-main mb-10">
        {title}
      </h2>
    )}

    <!-- 📐 Flex con texto e imagen -->
    <div class="flex flex-col md:flex-row md:items-start gap-8">
      <!-- Texto -->
      <div class={`w-full md:w-2/3 space-y-4 relative ${textOrder}`}>
        <!-- 📸 Imagen flotante solo en mobile -->
        <div class="md:hidden float-right ml-4 mb-2 w-[120px] h-[120px] overflow-hidden">
          <Image src={image} alt={imageAlt} class="w-full h-full object-cover" />
        </div>

        <div class="body-text text-black">
          {text.split('\n').map((paragraph) => (
            paragraph.trim() && <p>{paragraph}</p>
          ))}
        </div>
      </div>

      <!-- Imagen grande desktop -->
      <div class={`hidden md:flex w-full md:w-1/3 ${imageOrder}`}>
        <div class="max-w-sm overflow-hidden">
          <Image src={image} alt={imageAlt} class="w-full h-auto object-cover" />
        </div>
      </div>
    </div>
  </div>
</section>