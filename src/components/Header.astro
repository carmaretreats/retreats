---
import { Image } from 'astro:assets';
import logo from '../assets/images/Carma-Braun.png';
import MobileNav from './MobileNav.astro';
import DesktopNav from './DesktopNav.astro';
---

<header 
  class="w-full bg-white shadow-sm fixed top-0 left-0 z-50"
  x-data="{ open: false }"
>
  <div class="max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8 h-[7.8rem] flex items-center relative">
    <!-- LEFT: hamburger (mobile) + desktop left nav -->
    <div class="flex items-center flex-1 justify-start">
      <button
        class="sm:hidden text-gray-500 w-10 h-10 relative focus:outline-none bg-white flex items-center justify-center z-50"
        @click="open = !open"
        :aria-expanded="open"
        aria-controls="mobile-menu"
        aria-label="Toggle menu"
      >
        <div class="block w-5 absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2">
          <span
            class="block absolute h-0.5 w-5 bg-current transform transition duration-500 ease-in-out"
            :class="{'rotate-45': open, '-translate-y-1.5': !open }"
            aria-hidden="true"
          ></span>
          <span
            class="block absolute h-0.5 w-5 bg-current transform transition duration-500 ease-in-out"
            :class="{'opacity-0': open }"
            aria-hidden="true"
          ></span>
          <span
            class="block absolute h-0.5 w-5 bg-current transform transition duration-500 ease-in-out"
            :class="{'-rotate-45': open, 'translate-y-1.5': !open }"
            aria-hidden="true"
          ></span>
        </div>
      </button>

      <div class="hidden sm:flex sm:items-center">
        <DesktopNav side="left" />
      </div>
    </div>

    <!-- CENTER: logo (absolute centered so it's visually centered between left/right) -->
    <div class="absolute left-1/2 transform -translate-x-1/2 pointer-events-none">
      <a href="/" class="pointer-events-auto" aria-label="Home">
        <Image src={logo} alt="Carma Braun â€” Retreats logo" class="h-16 w-auto object-contain" />
      </a>
    </div>

    <!-- RIGHT: desktop right nav -->
    <div class="flex items-center justify-end flex-1">
      <div class="hidden sm:flex sm:items-center">
        <DesktopNav side="right" />
      </div>
      <div class="w-6 sm:w-auto" aria-hidden="true"></div>
    </div>
  </div>

  <!-- Mobile Menu -->
  <div
    id="mobile-menu"
    x-show="open"
    x-cloak
    x-transition
    class="sm:hidden bg-white shadow-md"
  >
    <MobileNav isMobile={true} />
  </div>
</header>