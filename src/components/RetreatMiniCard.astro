---
import { Image } from 'astro:assets';
import CtaLink from './CtaLink.astro';

const {
  imageSrc,
  title,
  date,
  location,
  buttonLabel = 'Mehr Infos',
  buttonHref = '#',
  imageShape = 'square', // 'square' | 'circle'
  description,
} = Astro.props;

const shapeClass = imageShape === 'circle' ? 'rounded-full' : 'rounded-none';
---

<article class="flex flex-col bg-[var(--color-cream-bg)] overflow-hidden text-center items-center">
  <!-- Imagen destacada -->
  <div class={`w-full aspect-square overflow-hidden ${shapeClass} mx-auto`}>
    <Image
      src={imageSrc}
      alt={title}
      widths={[400, 800, 1200]}
      formats={['avif', 'webp', 'jpeg']}
      class="w-full h-full object-cover"
      loading="lazy"
      decoding="async"
    />
  </div>

  <!-- Contenido -->
  <div class="mt-6 w-full flex flex-col items-start gap-3">
    <!-- Título (2 líneas fijas con clamp) -->
    <h3
      class="font-editorial text-3xl sm:text-2xl md:text-3xl lg:text-4xl leading-[1.2] mb-2 lg:mb-4 text-[var(--color-black)] min-h-[1.2em] text-left md:min-h-[2.4em] xl:min-h-[1.2em]">
      {title}
    </h3>

    <!-- Subtítulo (fecha + lugar, 2 líneas fijas con clamp) -->
    <p
      class="font-garamond text-xl md:text-2xl leading-[1.2] text-[var(--color-black)] text-left line-clamp-2 min-h-[2.4em]">
      {date} {location}
    </p>

    <!-- Descripción: siempre ocupa 4 líneas -->
    <p
      class="font-sans text-[12px] xs:text-[14px] md:text-[18px] leading-[1.4] text-left line-clamp-4 min-h-[5.6em] mb-2 xs:mb-4 lg:mb-4">
      {description}
    </p>

    <CtaLink
      label={buttonLabel}
      href={buttonHref}
      color="black"
    />
  </div>
</article>