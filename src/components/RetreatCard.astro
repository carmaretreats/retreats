---
import Carousel from './Carousel.astro';
import RoomAccordion from './RoomAccordion.astro';
import Cta from './CTA.astro';

const {
  retreatId = '',
  layout = 'left',
  date = '',
  introParagraphs = [],
  priceContent = '',
  includedContent = '',
  locationContent = '',
  carouselImages = [],
  ctaLabel = 'Jetzt Buchen',
  ctaHref = '#kontakt',
} = Astro.props;

const carouselOrder = layout === 'left' ? 'md:order-1' : 'md:order-2';
const contentOrder = layout === 'left' ? 'md:order-2' : 'md:order-1';
---
<!-- RetreatCard Section -->
<section id={retreatId} class="bg-cream-bg text-dark-brown font-sans w-full py-16">
  <div class="max-w-6xl mx-auto flex flex-col md:flex-row gap-12 items-start">
    
    <!-- Carousel -->
    <div class={`w-full md:w-1/2 ${carouselOrder}`}>
      <Carousel images={carouselImages} />
    </div>

    <!-- Content -->
    <div class={`w-full md:w-1/2 flex flex-col gap-6 justify-between ${contentOrder}`}>
      {date && (
        <h2 class="font-editorial italic text-xl md:text-2xl text-dark-brown">{date}</h2>
      )}

      {introParagraphs.length > 0 && (
        <div class="space-y-4 text-base leading-relaxed text-dark-brown">
          {introParagraphs.map((p) => <p>{p}</p>)}
        </div>
      )}

      <!-- Accordions with editable content -->
      <RoomAccordion
        priceContent={priceContent}
        includedContent={includedContent}
        locationContent={locationContent}
      />

      <!-- CTA -->
      <div class="flex justify-center md:justify-start pt-6">
        <Cta label={ctaLabel} href={ctaHref} color="orange" />
      </div>
    </div>
  </div>
</section>