---
import Carousel from '../components/Carousel.astro';
import Cta from '../components/CTA.astro';
import data from '../content/retreats-page.json';

const sectionData = data.accommodationSection;
---

<section id="unterkunft-preise" class="section bg-cream-bg text-dark-brown">
  <div class="section-inner">
    <div class="max-w-6xl mx-auto text-left mb-12">
      <p class="uppercase section-label text-[var(--color-dark-brown)] mb-8">
        {sectionData.label}
      </p>
      <h2 style="font-family: 'EditorialOld', sans-serif; font-style: italic;" class="heading-main">
        {sectionData.heading}
      </h2>
    </div>
  
    {sectionData.retreats.map((retreat, index) => (
      <div class={`max-w-6xl mx-auto flex flex-col md:flex-row gap-8 items-start ${index === 0 ? 'mb-16' : ''}`}>
        <!-- Text -->
        <div class="w-full md:w-1/2 font-sans text-left space-y-2 order-2 md:order-1">
          <h3 class="heading-sub italic mb-4 md:mb-6 text-dark-brown">
            {retreat.title}
          </h3>
          
          {retreat.priceOptions.map(option => (
            <p class="text-dark-brown body-text">{option.description}<span class="float-right">{option.price}</span></p>
          ))}
          
          <hr class="my-3 border-accent-orange" />
          
          <p class="text-dark-brown body-text italic">{retreat.retreatFeeLabel}</p>
          <p class="text-dark-brown body-text">{retreat.retreatFee.description}<span class="float-right">{retreat.retreatFee.price}</span></p>

          <div class="flex justify-center mb-4 xs:mb-6 md:mb-0 px-12 sm:px-6 lg:px-8 pt-6">
            <Cta dataRetreat={retreat.cta.dataRetreat} href={retreat.cta.href} color="orange" size="large" />
          </div>
        </div>
    
        <!-- Carousel -->
        <div class="w-full md:w-1/2 order-1 md:order-2">
          <Carousel images={retreat.carouselImages} />
        </div>
      </div>
    ))}
  </div>
</section>